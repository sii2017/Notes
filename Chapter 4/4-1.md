# 第四章 输出文字
## 绘制和更新
在windows中，只能在窗口的显示区域绘制文字和图形，而且不能确保咋显示区域内显示的内容会一直保留到程序下一次“有意”改写他的时候。例如当我们拖拽两个窗口的时候，那么可能会覆盖一个窗口的一部分。在这种情况下windows并不会保存窗口中被覆盖的区域，当区域移开后，windows会要求我们的程序重新显示区域的这个部分（通过发送WM_PAINT消息）。  
windwos是一个消息驱动系统，他通过把消息投入消息队列来将发生的各种时间通知给应用程序。  
### WM_PAINT
当windows发送WM_PAINT消息通知窗口消息处理程序，则说明窗口的部分（全部）显示区域需要进行绘制。  
大多数windows程序在WinMain进入消息循环之前的初始化期间都要调用函数UpdateWindow，来发送第一次WM_PAINT消息，进行第一次“必须的绘制”显示区域。  
之后在发生以下几种事件之一时，窗口消息处理程序会收到一个WM_PAINT消息：  
移动或显示窗口时；改变窗口大小时；使用滚动条显示区域的一部分时；代码中使用InvalidateRect或InvalidateRgn函数刻意产生WM_PAINT消息时。  
