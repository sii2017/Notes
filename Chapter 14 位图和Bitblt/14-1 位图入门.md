# 第十四章 位图和Bitblt
位图是一个二维的位数组，**它与图像的图素一一对应**。当现实世界的图像被扫描成位图以后，图像被分割成网格，并以图素作为取样单位。在位图中的每个图素值指明了一个单位网格内图像的平均颜色。单色位图每个图素只需要一位，灰色或彩色位图中每个图素需要多个位。    
位图代表了Windows程序内储存图像信息的两种方法之一。储存图像信息的另一种形式是metafile，将在第十八章讨论。     
，Microsoft Windows 3.0定义了一种称为设备无关位图（DIB：device-independent bitmap），将在下一章讨论DIB。     
本章主要讨论GDI位图对象，这是一种在Windows中比DIB更早支持的位图形数据。如同本章大量的范例程序所说明的，这种比DIB位图更早被Windows支持的图形格式仍然有其利用价值。
## 位图入门
位图和metafile在计算机图形处理世界中都很重要。位图经常用来表示**来自真实世界的复杂图像**，例如数字化的照片或者视讯图像。Metafile更适合于描述**由人或者机器产生的图像**，比如建筑蓝图。位图和metafile都能存于内存或作为文件存于磁盘上，并且都能通过剪贴簿在Windows应用程序之间传输。   
位图和metafile的区别在于位映像图像和向量图像之间的差别。位映像图像**用离散的图素来处理输出设备**；而向量图像**用笛卡尔坐标系统来处理输出设备**，其线条和填充对象能被个别拖移。现在大多数的图像输出设备是位映像设备，这包括视讯显示、点阵打印机、激光打印机和喷墨打印机。而笔式绘图机则是向量输出设备。    
**位图有两个主要的缺点：**     
1 容易受设备依赖性的影响。最明显的就是对颜色的依赖性，在单色设备上显示彩色位图的效果总是不能令人满意的。并且位图经常暗示了特定的显示分辨率和图像纵横比。尽管位图能被拉伸和缩小，但是这样的处理通常包括复制或删除图素的某些行和列，这样会破坏图像的大小。而metafile在放大缩小后仍然能保持图形样貌不受破坏。    
2 位图通常需要很大的储存空间。例如，描述完整的640×480图素，16色的视频图形数组（VGA：Video Graphics Array）屏幕的一幅位图需要大于150 KB的空间；一幅1024×768并且每个图素为24位颜色的图像则需要大于2 MB的空间。Metafile需要通常比位图来得少的空间。**位图的储存空间由图像的大小及其包含的颜色决定，而metafile的储存空间则由图像的复杂程度和它所包含的GDI指令数决定。**       
**位图优于metafile之处在于速度**。
### 位图的来源
位图可以手工建立，如画图工具等。    
位图图像也能由计算机程序计算生成。尽管大多数计算生成的图像能按向量图形metafile储存，但是高清晰度的画面或碎形图样通常还是需要位图。    
现在，位图通常用于描述真实世界的图像，并且有许多硬设备能让您把现实世界的图像输入到计算机。这类硬件通常使用电荷耦合设备（CCD：charge-coupled device），扫描仪就是其中最古老的一种。以及最开始的数码相机（书上二十年前的数码相机，现在的数码相机是不是我并不知道2018-02-01）。