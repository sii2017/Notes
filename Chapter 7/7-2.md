## 程序中的命中测试
窗口消息处理程序经常必须在显示区域中进行一些命中测试。一般来说，命中测试中会使用xy坐标值，他们由鼠标消息的lParam参数给出。
### 一个假象的例子
这样一个例子。  
假设程序需要显示几列按字母排序的文件。我们必须要由自己来进行命中测试工作。  
假定文件名保存在称为szFileNames的已排序字符串指针数组中。  
假定文件列表开始于显示区域的顶端，显示区域cxClient像素宽，cyClient像素高，每列为cxColWidth像素宽，每个字符高度为cyChar像素高。
### 范例程序
参考 CHECKER1.C  
程序所示，将显示区域平均分为五乘五的方格，进行点击的时候判断在哪个方格并进行标记，然后在WM_PAINT中划交叉斜线。
### 使用键盘仿真鼠标
CHECKER1只能在装有鼠标的情况下才可以执行。下面我们在程序中加入键盘接口。  
即使没有安装鼠标，windows仍旧可以显示一个鼠标光标。windows为这个光标保存了一个“显示计数”。如果安装了鼠标则显示计数被初始化为0；没有安装则为-1，只有当显示计数为非负数时才显示鼠标光标。值得注意的是这是计数器，而不是单纯的布尔值，如果在程序中连续减去了多次，则需要加回来同样多的次数。以下有一些相关的函数：    
```c
ShowCursor(TURE);//增加计数器1  
ShowCursor(FALSE); //减少计数器1  
GetCursorPos(&ps);//获取当前鼠标的位置，这里没用到hwnd，显然是屏幕坐标  
SetCursorPos(x,y);//设定当前鼠标的位置，如果有需要的话可以使用ScreenToClient进行转换  
```
在处理鼠标消息时获得的鼠标位置和GetCursorPos获得的鼠标位置可能会有不同，**前者是产生消息时鼠标的位置，后者是鼠标当前位置。**  
我们接下来些的程序，当按下方向键时鼠标移动较慢，随后会加快。  
### 在CHECKER中加入键盘接口
参考 CHECKER2.C  
加入了通过方向键来控制鼠标光标的位置，以及通过回车和空格替代左键单击。
### 将子窗口用于命中测试
有些程序把显示区域分为几个小的逻辑区域。比如画图，有工具栏颜色栏菜单栏等等。实际上他把窗口划分成了不同的子窗口，拥有各自的串钩句柄和窗口消息处理程序以及显示区域。并且鼠标消息的lParam参数的坐标是对应于该子窗口显示区域左上角的坐标，而不是父窗口的。   
第九章中，我们将看到子窗口控件，滚动条、按钮和编辑方块等预先定义的子窗口。
### CHECKER中的子窗口
该版本建立了25个处理鼠标单机的子窗口，他没有键盘接口。  
参考CHECKER3.C
### 子窗口和键盘
参考CHECKER4.C