# 定时器
Microsoft Windows定时器是一种输入设备，它周期性的在每经过一个指定的时间间隔后就通知应用程序一次。  
以下是windows定时器相关的一些应用：  
> **多任务**，将多个任务通过定时器分配成小块，每接收到一个WM_TIMER消息则处理一块。  
> **维护更新过的状态报告**，程序可以利用定时器持续的实时更新某个任务的进展情况。  
> **实作自动存储功能**，通过定时器在指定时间过去后将功使用者的工作存储到磁盘上。  
> **终止程序展示版本的执行**，一些程序的展示版本在固定时间后结束。时间已到，则定时器进行操作。  
> **步进移动**，游戏中的图形对象或计算机辅助教学程序中的连续显示，需要按指定的速率来处理。利用定时器可以消除由于微处理器速度不同而造成的不一致。  
> **多媒体**，一个程序可以使用定时器来周期性的检查已经播放了多少声音数据，并据此来协调屏幕上的视觉信息。  
## 定时器入门
可以通过SetTimer函数为windows程序分配一个定时器。该函数有一个时间范围从1毫秒到4294967295毫秒（将近50天）的整数型态参数。例如如果间隔1000毫秒则windows每秒给程序发送一个WM_TIMER消息。  
当程序用完定时器可以使用KillTimer函数来停止定时器消息。因此可以通过KillTimer函数来编写一个只使用一次的定时器。  
### 系统和定时器
总之在程序的进行中，不用担心程序被WM_TIMER消息意外中断。定时器类似于鼠标和键盘，驱动程序处理异步硬件中断时间。
### 定时器消息不是异步的
然而，WM_TIMER消息并不是异步的。他和其他消息是放在一起的，所以如果一个消息间隔时间是1000毫秒，他并不能在准确的1000毫秒收到。WM_TIMER是低优先级的，如果WM_PAINT一样，程序只有在消息队列中没有其他消息时才接收他们。换言之，WM_TIMER时间的精度一般可以使用，但是一些需要高精度定时器的程序中不宜使用。  
WM_TIMER还有一个特点与WM_PAINT相似：windows不能持续的向消息队列中放入多个WM_TIMER消息，而是将多余的WM_TIMER消息合并成一个消息。所以在短时间内的多个WM_TIMER消息可能会有**遗漏**。   
## 定时器的使用：三种方法
如果要在整个程序执行期间都使用到定时器，那么应该在WinMain函数中或者处理WM_CREATE的时候调用SetTimer，并且在退出WinMain或响应WM_DESTROY消息时调用KillTimer。
### 方法一
参考BEEPER1  
### 方法二
参考BEEPER2
### 方法三