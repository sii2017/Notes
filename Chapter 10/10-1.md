# 第十章 菜单及其他资源
大多数windows程序都包含一个自定义的图标，windows将其显示在应用程序标题列左上角，开始菜单以及快捷方式等等。  
图标、光标、菜单和对话框都是相互关联的，他们是windows的全部资源形态。资源即数据，**它们被存储在程序的.EXE文件中**，但是他们不是一般的数据，不会在源代码中被存储成变量，而是由windows提供函数直接或者间接的加载他们。比如我们已经遇到的LoadIcon和LoadCursor，他们从windows中加载二进制图标和光标映像，并传回该图标和光标的**句柄**。  
本章中，我们先建立自己的图标，然后从程序自己的EXE文件中载入。   
本章我们讨论图标，游标，字符串，自定义资源，菜单，键盘快捷键。  
十一章讨论对话框，十四章讨论位图。
## 图标、光标、字符串和自订资源
使用资源的好处之一，在于程序的许多组件能够连结编译进程序的.EXE文件中。  
作为资源，图标储存在开发者计算机上可单独编辑的文件中，但在编译程序中被连结编译进.EXE文件中。    
### 将图标添加到程序
参考ICONDEMO.C  
编译第一次，显示缺少"resource.h"。
由于程序中包含了"resource.h"所以需要增加头文件。右键项目，选择resource然后新建同名项目就会生成两个文件，ICONDEMO.RC（资源描述档）和RESOURCE.H（允许C原始码文件和资源描述档引用相同的已定义标识符）。     
**除非您对所做的动作很有把握，否则不要轻易地更改它们。**资源描述档是文本文件。它包括这些资源的可用文字形式表达的描述，例如菜单和对话框。  
再次编译，显示IDI_ICON未定义。这次我们改变了描述，是因为以前使用的是系统标准图标，这次我们使用的是自定义图标。  
尽管书里显示，让我们在Developer Studio的File View窗口中，从Insert菜单上选择Resource，然后New一个图示出来。但是由于版本的区别，我们直接在Resource View中，邮件我们的resource文件，Add Resouce并且New出一个Icon（图示）。  
系统会根据一些情况使用大图标32X32的，也可能使用小图标16X16的，我们将两个都画好，并且他们会存储在相同的ICONDEMO.ICO文件中，并以相同的IDI_ICON标识符引用。在适当的时候windows会自动使用该较小的图标。  
### 取得图示句柄
windows通过定义的图标的标识符，调用函数来获得该图标的句柄：  
```c
hIcon= LoadIcon(hInstance, MAKEINTRESOURCE(IDI_ICON));  
```
第一个参数指出来自哪个文件的执行实体句柄。使用hInstance表示来自程序自己的.EXE文件。第二个参数实际上是指向字符串的指针，待会儿可以看到，可以使用字符串而不是数值标识符资源。  
在之前的程序中我们使用以下函数：  
```c
LoadIcon(NULL, IDI_APPLICATION);  
```
第一个参数为NULL表示我们使用的是预先定义的图标。IDI_APPLICATION在WINUSER.H中也有定义：  
```c
#define IDI_APPLICATION MAKEINTRESOURCE(32412)  
```

### 在程序中使用图标
### 使用自订光标
### 字符串资源
### 自订的资源